

웹엑스 설명

서버에는 두개가 있는데

Web server Request가 왔을 때 web page를 Response의 Body 담아서 응답을 주는 서버

서버가 html css js를 response의 body에 담아서 보내주면 웹 브라우저가 화면을 해석해서 보여주고 있는 것



API server Request가 왔을 때 요청한 것에 대한 처리를 하고 그 결과를  Response의 Body 담아서 응답을 주는 서버

장바구니에 담는건 web page를 주세요가 아님

유저의 장바구니에 노트북 A를 담아줘

서버는 view-model을 통해 처리를 하고 response를 줌(응답을 함) 이때 response를 어떻게 주냐?

메세지는 msg로 많이 씀

그럼 클라이언트는 아 success구나 msg는 이거구나 잘 담겼네 하고 알아차리고 

화면에서 아이콘이 바뀌거나 함

쟤는 화면을 그리는데 필요한 결과가 아니야 단지 요청한 것에 대한 과정을 처리하고 그 결과를 response의 body에 담아서 그냥 돌려주는거 이러한 역할을 하는 서버를 api server라고 함

key: value 의 json 형식으로 많이 사용함

지금까지 우리는 장고를 웹서버로 써왔고 이제 api서버로 써보자는거~

​            

HTTP

한마디로 말을 하면,  클라이언트와 서버가 서로 어떤 형식으로 데이터를 보내줄건지를 약속한 것(규약)

Hyper Text를 서로 주고받을건데 Hyper Text가 있는 웹에서 클라이언트와 서버가 어떠한 형식으로 데이터를 보내주고 받을건지 약속한 것!

HTTP말고도 다른 프로토콜

FTP, SSH, SMTP, HTTP, HTTPS

HTTS에서 S는 secure 조금 더 안전한 HTTP 프로토콜!

뭐가 더 안전해진건데? 네트워크 공부해~~

클라이언트와 서버가 서로 데이터를 주고 받으려면 '프로토콜'이 필요함

웹 개발에서는  HTTP, HTTPS가 중요함



HTTP의 기본 특성

서술형내기좋다구요?ㅠ.ㅠ

비연결성(Connetless)

클라이언트와 서버가 한 번 응답을 주고 받으면 연결을 끊음

왜 이렇게 설계했을까..? 리소스를 아끼기 위해서!

무상태(stateless)

Connetless 발생한 것, 서버가 클라이언트를 기억하지 못함(식별 불가능)

-> 매번 요청할 때마다, 내가 누군지를 서버에게 알려줘야함

---->너~~무 불편해 

그래서 등장한게 쿠키와 세션! 

쿠키 - 맨날 까먹지말고 기억해! 내 정보를 클라이언트 너가 기억해서 나(서버)한테 들고와!

너가 누구인지 너가 기억하라구~

근데 쿠키가 굉장히 쉽게 뺏겨(나의 민감한 정보들,, 내 계좌, 내 나이 등 내 프라이버시들아ㅠ)- > 보안이 취약

세션 - 그 민감한 정보, 서버가 기억해줄게 민감한 정보는 세션에 저장해넣고 쿠키에는 아이디만 저장해!



HTTP 메시지

요청

HTTP Method

클라이언트가 서버에게 Request(요청)을 보내는데 이러한 Request가 어떤 요청인지 쉽게 알려주기 위해서

데이터를 달라는거야 만든다는거야 수정한다는 삭제한다는거야 뭐야! 

R 조회  GET

C 생성 POST

U 수정 PUT

D 삭제 DELETE

서버는 HTTP method를 보고 알게됨 아~ 조회한다는거구나?! 이런식으로?

method는 요청하는거니까 Request에 담겨있어

Request는 Head와 Body 로 나누어져있어

Head 요청에 대한 부가정보, method

Body 실제 데이터를 담아서 보낼 때 Body는 있을 수도 있고 없을 수도 있어 

GET요청은 Body가 필요없어, DELETE도 Body가 필요없어

POST, PUT은 Body 필요해 

Head에는 항상 채워져있는데 Body는 그렇지않음(-> method에 따라 다름!)



Header가 뭐야?

Head에 담겨있는 key:value가 여러개 담겨있기 때문에 Headers라고 함

user-agent 나에게 요청보낸 유저는 windows에 win64비트에 chrome은 이 버전이구나~

개발자들은 user-agent를 수집해서 분석함

운영체제 정보까지 다 담겨있구나 아항~



HTTP Response

Head와 Body로 나눠짐

Head에는 Header가 담겨져있음 상태코드가 Header에 담겨서 전송됨(중요해)

상태코드는 숫자에 불과하는데 그에 대응되는 상태 메세지를 가지고 있음 status message

상태코드 상태메세지

200              ok

404            not found

상태코드는 5개의 코드로 이루어져있음

100번대 서버가 클라이언트한테 정보성 응답 

(이것만 알자) 100 -> continue

클라이언트가 서버에게 저기..서버야 나 계속 요청해도 괜찮겠어? 하고 물어보면 괜찮아 계속해! 하는 것

200번대 일반적인, 정상적인 상황

200  ->  OK 다 처리됐어! 정상이야!

201 ->  Create 클라이언트의 요청대로 리소스가 서버에게 잘 생성되었다

그래서 POST요청은 200, 201 둘다 가능 구성하기 나름

300번대 잠깐만 있어봐 너 그거하려면 뭐  조금 더 해야할거 같은데?

301 ->  Moved Permanently  너가 나한테 요청한 리소스 그 위치에 있는거 아니야! 옮겨졌어!

보통 301을 하고 서버가 redirect를 줌 

너 cat 이미지 달라고 했잖아 근데 없어 대신 우리한테 dog 이미지는 있으니까 dog 페이지를 보여줄게?(redirect)

304 -> Not Modified 수정되지 않았음 이전에 받았던 이미지를 주머니에 잘 넣어두고 또다시 그 페이지에 들어와서 이미지를 달라고 하면 서버가 너 그거 전에 봤거든? 하고 알려주면 브라우저가 어 진짜네 있었네 하고 전에 넣어뒀던 이미지 꺼내서 보는거(리소스 절약)

예 ? 브라우저 캐싱이요...? 

400번대 클라이언트가 잘못했어!!

400 -> Bad Request 클라이언트님 요청은 제대로 했는데 형식이나 내부 문법이 잘못된거같아요! url은 맞습니다요!

401 -> Unauthorized  클라이언트님 그 요청 잘해주셨는데 그거 하려면 인증부터 하고오삼~

403  -> Forbidden 권한이 막힌거 너 인증은 잘했는데 권한이 없어

404 -> Not Found 나한테 없는 리소스를 요청한 것(url)

429 -> Too Many Requests 아 요청이 너무 많아요,,ㅡㅡ

500번대 서버가 잘못했어!! 개발자야 야근해라

500 -> Internal Server Error 클라이언트 요청은 ok야 근데 안에 내부 로직이 뻥! 터졌음

503 -> Service Unavaliable  로아 터졌다



Body 웹페이지에 필요한 정보,  요청한 것에 대한 처리 정보



웹에서의 리소스 식별

리소스? 서버에 존재하는 정보, 자원, 데이터

우리는 리소스를 조회 갱신 추가 삭제 했던 것!

URI

URL 서버에 존재하는 정보가 네트워크상에서 봤을 때 어디에 있는지 나타내는거 L=located

각각의 리소스가 네트워크상에 위치해있는 정보

URN 얘는 안 써

URL구조(중요해!!!)

Scheme header에 들어있음

Host ip주소는 기억하기 어려우니까 도메인을 쓰는거야

Port 어떤 컴퓨터의 문을 열고 들어갈거니

Path 도메인과 포트를 찾았다면 그안에서 어떻게 url이 나눠지고 있는지 -> 리소스의 경로 리소스가 이 컴퓨터의 어디에 접근하면 되는지 명시하는거

Query  쿼리스트링 있을 수도 있고 없을 수도 있고~ 서버로 전송

Fragment  서버로 전송안됨 HTML 특정 부분을 보여주기 위한 방법





응답에는 상태 코드가 있음

리소스에 대한 행의를 정의함 

우리가 요청을 보냈을 때 원하는 동작이 무엇이냐는 것

GET 조회

POST  작성 

PUT 수정

DELETE 삭제 post로도 삭제할 수 있지만 delete로 삭제하는게 더 쉬움

urls.py는 뭘하겠다라는 액션이 없음 단지 자원을 표현하는 단계 

뭘 하기위해서는 method 사용

posts/1/ 이라는 url을 GET이라는 method로 보냄 -> 1번 게시글 조회

posts/1/create 이런건 restful한 api가 아님

상태코드

2,4,5를 잘 알고있어야함

2xx 정상

4xx 클라이언트에서 에러

urls.py에 없는 url을 요청한거

5xx 다 서버 잘못이야~!

1xx는 일반적인 기업에서 사용하지 않음

가장 많이 보이는건 200 ok 하여튼 정상적으로  처리되었음

201 created 새로운 데이터가 생성되었을때 (회사 내부적으로 백앤드 개발자와 클라이언트 개발자가 약속하는거라 200을 쓸 수도 있음)

401 인증되지 않은 유저가 무엇을 하려고 할 때 관리가가 아닌데 관리자 api을 쓰려고 한다거나..?

403 forbidden 권한에 대한 문제 발생

404 not found 리소스를 찾을 수 없다 = 클라이언트가 url로 서버를 요청하는거 

500 Internal Server Error 야근행~~ index out of range 내부 로직을 잘못짜서 터진거..

502 네트워크를 알아야 함 사실 많이 만나지 않는 상태코드야

503 야근행~~



데이터를 클라이언트에게 줄 때 내려준다라고 씀 데이터 내려줄게~~

URI의 구조부터는 꼭 알아야 하는 지식!!!!!!!!!!!!!!!



API -> Web API

프론트엔드에서 어떤 url로 어떤 Request를 보내면 백엔드에서 어떤 처리를 해서 어떤 Response를 내려줄게 라고 약속한 규칙

'약속' -> 약속은 깨라고 있는 거 어떻게 설계해도 기능적으로 문제가 없음

REST API 딱! 있는게 아니라 약속인데 WEB API를 설계할때의 가이드라인

직역하면 표현적인 상태 이전 ? 

웹을 하나의 거대한 프로그램이라고 생각을 해보자

우리가 웹 서핑을 하면서 오는 웹 페이지들 

웹 이라는 프로그램의 매순간순간의 상태를 보는것

그래서 표현적인 우리가 보고있는 매순간의 상태를 이전 한다는 것..? 

REST API를 사요하는 서비스를 RESTful 서비스라고 함

오늘날의 대부분을 서비스는 RESTful 서비스를 따르고 있음



이건 외워야해!!

URL은 리소스를 나타내기 위해서만 사용하고 리소스에 대한 처리는 메서드로 표현함

Document는 단수명사로, Collection은 복수명사로 표현함

이 두가지만 지키면 RESTful하게 API를 짤 수 있음

~/articles/1/edit 이렇게 쓰지마!

Document가 모여서 있는게 Collections

여러개의 article이 모여있는.. ?

article/POST x

articles/POST o



꼭 JSON만 쓰는건 아니지만 오늘날에는 JSON을 많이 사용함





rest에서 중요한건 API

어떤 서비스를 이욯하기 위해서 데이터를 어떻게 요청하고 어떤 데이터를 내려줄지 짜는거!

응답 데이터 타입

HTML -> 이제 거의 보기 힘들어..

우리는 XML, JSON 을 쓸거야 요즘에는  JSON을 많이 써

XML은 오래된 회사가 써

대표적인 서비스 목록

우리가 쓰는 모든 서비스가 API

카카오톡 네이버웹툰 유튜브 디스코드

서버에서 하는 일은 API 를 설계하고 API에 요청이 들어왔을때 어떻게 할 지 설계하는거!



JSON

자바스크립트는 key-value 형태로 쓰면 객체 



REST

rest를 지키지 않으면 취업이 안된다구...? 엉엉엉,...



django_seed django에서 모델을 만들 때 데이터를 하나하나 넣음  

음원 서비스 -> 음원 데이터를 미리 우리의 데이터베이스에 넣어둬야함

artist

album

...

shell_plus로 하나하나 create해서 데이터를 넣는건 무리..

내가 가지고 있는 데이터 파일을 장고 모델에 맞춰서 데이터베이스에 넣어주는게 django_seed

음원 서비스가 아니ㄹ더라도 미리 데이터를 가지고 있어야 하는게 있음 - 도서 조회 서비스랄까

django_seed 검색해보기 

django_seed와 항상 같이 나오는게 faker



1.이제는 템플릿을 랜더링 하지 않아



DRF를 많이 사용함

장고를 백앤드로 쓸 때는 거의 정석처럼 쓰이는거!

최근에는 DRF 말고도 많이 나왔지만 그건 넥스트 스텝이여



Postman 참고 아니구 필수라구...

실제로 요청을 하고 응답을 받는 프로그램이야 



PUT 전체 데이터 수정

PATCH 한두개? 근데 회사마다 다름



django rest frame work 앞글자만 딴게 DRF

api vesion 1 명시

django seed 라이브러리를 사용해서 데이터 생성

model을 django seed가 봄 articles모델을 니가 참조해서 각각의 필드의 데이터 타입에 맞게 20개의 데이터를 생성해서 넣어줘?

어떻게 파이썬 객체로 만들 수 있을지 만드는거?

이 씨리얼 라이저가 어떤 모델을 모델의 어떤 필드를 

many = True 여러 인스턴스를 직렬할 때

시리얼라이즈 모델에서 데이터를 가져와서 jsonresponse로 만들기 위해서 쓰는거

모델에서 가져온 데이터가 여러개 즉 쿼리셋 형태일때 파이썬 형태로 만들어주잖아 

야 이거 한개 아니고 여러개니까 너가 잘 처리해라~



Pagination

article을 조회했는데 1000개의 데이터가 있어 

<<<1,2,3,4...>>>

1번 누르면  100개 보이고

2번 누르면 100개 보이고 하는?



\# *serialize를 사용할 때 여러개의 형태가 들어갈 때* 

  \# *우리가 넘겨주는 데이터가 한개짜리가 아니라 여러개야* 

  \# *너 여러번 처리해 하는 옵션을 넘겨주는거!*



프린트를 찍어보니 

유저로부터 입력한 데이터가 이렇게 나오는구나..!

Response(serializer.data)나 (data=request.data) 에서 우리가 원하는 정보가 .data라는 attribute에 들어있다는건 약간은 암기사항인거죠?

model을 보고 판단을 함  username은 있는데 title content 이런건 없어 null True 안해줬으니까

우리 model에는 username 없어 필요없는거니까

클라이언트는 상태코드를 보고 내가 성공했는지 아니까 

response로 데이터를 넣어서 주면 데이터는 잘옴 이때 status code는 200이 default

dfr를 쓰면 csrf_token체크하지않음 !

이 인스턴스가 이 데이터로 modelform이 수정하도록 했음

 그냥 form data의 key value에 articcle  10넣어줘도 되지만 

이거 하기 싫엉

read_only_fields 읽기 전용 필드

그 곳에 읽을 수 있게 데이터를 넣어줌

content만 보냈음에도 불구하고 정상적으로 데이터가 들어감을 확인할 수 있음

빠지기 때문에 save 할 때 article=article을 넣어줌



피피티 마지막 4장 몰라도됨(count해주는거)

평가에도 안나와





